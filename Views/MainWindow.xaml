<Window xmlns="https://github.com/avaloniaui" 
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
  xmlns:vm="clr-namespace:FuzzyComic.ViewModels;assembly=FuzzyComic" 
  Icon="resm:FuzzyComic.Assets.avalonia-logo.ico" 
  Title="FuzzyComic" 
  WindowState="Maximized" 
  HasSystemDecorations="false">
  <Design.DataContext>
    <vm:MainWindowViewModel/>
  </Design.DataContext>

  <Window.Styles>
    <Style Selector="Button.invisible">
      <Setter Property="Opacity" 
        Value="0" />
    </Style>

    <Style Selector="Window">
      <Setter Property="Background" 
        Value="Black" />
    </Style>
  </Window.Styles>

  <Panel>
    <Grid ZIndex="0" 
      RowDefinitions="*,Auto" 
      ColumnDefinitions="Auto,*">
      <Image Grid.Row="0" 
        Grid.Column="0" 
        Grid.ColumnSpan="2" 
        Stretch="Uniform" 
        Source="{Binding CurrentComic.CurrentPage}" />

      <!-- Progress bar at bottom of screen -->
      <Panel Grid.Row="1" 
        Grid.Column="0" 
        Width="{Binding CurrentComic.ProgressBarWidth}" 
        Height="2" 
        Background="Green" />
      <Panel Grid.Row="1" 
        Grid.Column="1" 
        Height="2" 
        Background="White" />
    </Grid>

    <!--
      These buttons all have the "invisible" class added to them when
      a comic is loaded, that way they are seen by default but hidden when reading
    -->
    <Grid ZIndex="1" 
      RowDefinitions="*,*,*" 
      ColumnDefinitions="*,*,*">
      <Button Grid.Row="0" 
        Grid.Column="0" 
        Grid.RowSpan="3" 
        Name="previousPageButton" 
        Command="{Binding DoPreviousPage}" 
        Content="Previous Page" 
        Cursor="Hand" />
      <Button Grid.Row="1" 
        Grid.Column="1" 
        Name="showMainMenuButton" 
        Content="Double tap for menu" 
        Cursor="Hand" />
      <Button Grid.Row="0" 
        Grid.Column="2" 
        Grid.RowSpan="3" 
        Name="nextPageButton" 
        Command="{Binding DoNextPage}" 
        Content="Next Page" 
        Cursor="Hand" />
    </Grid>

    <Grid RowDefinitions="*,Auto,*" 
      ColumnDefinitions="*,Auto,*" 
      ZIndex="3">
      <Border Name="mainMenu" 
        Grid.Row="1" 
        Grid.Column="1" 
        BorderBrush="Black" 
        BorderThickness="1" 
        CornerRadius="3" 
        Padding="2" 
        IsVisible="false">
        <Border.Background>
          <SolidColorBrush Opacity="0.3" 
            Color="White" />
        </Border.Background>
        <StackPanel >
          <Grid ColumnDefinitions="*,Auto">
            <Button Content="X" 
              Grid.Column="1" 
              Command="{Binding DoCloseMainMenu}" />
          </Grid>
          <Button Content="Open Comic" 
            Command="{Binding DoOpenComicFile}" 
            Cursor="Hand" />
          <Button Content="Quit Application" 
            Command="{Binding DoExit}" 
            Cursor="Hand" />
        </StackPanel>
      </Border>
    </Grid>
  </Panel>

</Window>